<div class="register-container">
  <div class="register-card">
    <h2>Create New User</h2>
    <p class="subtitle">Fill the details to create BankUser or ClientUser</p>

    <div class="toast-message" *ngIf="toastMessage" [ngClass]="[toastType, toastShow ? 'show' : '']">
      {{ toastMessage }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="registerUser()">

      <div class="form-row">
        <div class="form-group">
          <label for="userName">Username</label>
          <input id="userName" type="text" formControlName="userName" placeholder="Enter username" />
          <div class="error" *ngIf="registerForm.get('userName')?.touched && registerForm.get('userName')?.invalid">
            <small *ngIf="registerForm.get('userName')?.errors?.['required']">Username is required.</small>
            <small *ngIf="registerForm.get('userName')?.errors?.['maxlength']">Username cannot exceed 50 characters.</small>
          </div>
        </div>

        <div class="form-group password-group">
  <label for="password">Password</label>
  <div class="password-wrapper">
    <input 
      id="password" 
      [type]="showPassword ? 'text' : 'password'" 
      formControlName="password" 
      placeholder="Enter password" 
    />
    <button type="button" class="toggle-password" (click)="togglePassword()">
      {{ showPassword ? 'Hide' : 'Show' }}
    </button>
  </div>

  <div class="error" *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
    <small *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</small>
    <small *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</small>
    <small *ngIf="registerForm.get('password')?.errors?.['pattern']">Password must contain at least one special character.</small>
  </div>
</div>

      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="firstName">First Name</label>
          <input id="firstName" type="text" formControlName="firstName" placeholder="Enter first name" />
          <div class="error" *ngIf="registerForm.get('firstName')?.touched && registerForm.get('firstName')?.invalid">
            <small *ngIf="registerForm.get('firstName')?.errors?.['required']">First name is required.</small>
            <small *ngIf="registerForm.get('firstName')?.errors?.['maxlength']">First name cannot exceed 50 characters.</small>
          </div>
        </div>

        <div class="form-group">
          <label for="lastName">Last Name</label>
          <input id="lastName" type="text" formControlName="lastName" placeholder="Enter last name" />
          <div class="error" *ngIf="registerForm.get('lastName')?.touched && registerForm.get('lastName')?.invalid">
            <small *ngIf="registerForm.get('lastName')?.errors?.['required']">Last name is required.</small>
            <small *ngIf="registerForm.get('lastName')?.errors?.['maxlength']">Last name cannot exceed 50 characters.</small>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="emailId">Email</label>
          <input id="emailId" type="email" formControlName="emailId" placeholder="Enter email" />
          <div class="error" *ngIf="registerForm.get('emailId')?.touched && registerForm.get('emailId')?.invalid">
            <small *ngIf="registerForm.get('emailId')?.errors?.['required']">Email is required.</small>
            <small *ngIf="registerForm.get('emailId')?.errors?.['email']">Enter a valid email address.</small>
          </div>
        </div>

        <div class="form-group">
          <label for="phoneNumber">Phone Number</label>
          <input id="phoneNumber" type="text" formControlName="phoneNumber" placeholder="Enter phone number" />
          <div class="error" *ngIf="registerForm.get('phoneNumber')?.touched && registerForm.get('phoneNumber')?.invalid">
            <small *ngIf="registerForm.get('phoneNumber')?.errors?.['required']">Phone number is required.</small>
            <small *ngIf="registerForm.get('phoneNumber')?.errors?.['pattern']">Phone number must be exactly 10 digits.</small>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="address">Address</label>
          <textarea id="address" formControlName="address" placeholder="Enter address"></textarea>
          <div class="error" *ngIf="registerForm.get('address')?.touched && registerForm.get('address')?.invalid">
            <small *ngIf="registerForm.get('address')?.errors?.['required']">Address is required.</small>
            <small *ngIf="registerForm.get('address')?.errors?.['maxlength']">Address cannot exceed 200 characters.</small>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group full-width">
          <label for="userRole">Role</label>
          <select id="userRole" formControlName="userRole">
            <option value="BANKUSER">Bank User</option>
            <option value="CLIENTUSER">Client User</option>
          </select>
          <div class="error" *ngIf="registerForm.get('userRole')?.touched && registerForm.get('userRole')?.invalid">
            <small *ngIf="registerForm.get('userRole')?.errors?.['required']">Role is required.</small>
          </div>
        </div>
      </div>

      <button type="submit" [disabled]="registerForm.invalid || loading">
        {{ loading ? 'Creating...' : 'Register' }}
      </button>
    </form>

    <p class="signup-link">
      Already have an account
      <a routerLink="/login">Sign In</a>
    </p>
  </div>
</div>
