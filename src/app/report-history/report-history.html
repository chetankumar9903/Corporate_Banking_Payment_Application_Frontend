<div class="card report-history-card shadow-sm p-4">
  <h3 class="card-title mb-4 text-center">Report History</h3>

  <!-- Search & Controls -->
  <div class="d-flex mb-3">
    <input [(ngModel)]="search" (keyup.enter)="onSearch()" placeholder="Search reports..." class="form-control me-2" />
    <button class="btn btn-primary me-2" (click)="onSearch()">Search</button>
    <button class="btn btn-outline-secondary" (click)="clearFilter()">Clear</button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="text-center py-3">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Reports Table -->
  <div class="table-responsive" *ngIf="!loading && reports.length">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Format</th>
          <th>Generated</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of reports">
          <td>{{ r.reportName }}</td>
          <td>{{ r.reportType }}</td>
          <td>{{ r.outputFormat }}</td>
          <td>{{ r.generatedDate | date:'medium' }}</td>
          <td>
            <button class="btn btn-sm btn-success" (click)="download(r)">
              <i class="bi bi-download"></i> Download
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !reports.length" class="text-center text-muted py-3">
    No reports found.
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center align-items-center mt-3">
    <button class="btn btn-outline-secondary me-2" (click)="prev()" [disabled]="page === 1">Prev</button>
    <span>Page {{page}}</span>
    <button class="btn btn-outline-secondary ms-2" (click)="next()" [disabled]="page * pageSize >= total">Next</button>
  </div>
</div>