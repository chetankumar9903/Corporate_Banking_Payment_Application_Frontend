<div class="salaries-wrapper">
  <div class="header-row">
    <h3>Salary Disbursements</h3>
    <div class="actions">
      <a routerLink="/client-dashboard/salaries/create" class="btn btn-sm primary">+ Pay Employee</a>
      <a routerLink="/client-dashboard/salaries/batch" class="btn btn-sm secondary">+ Pay All</a>
    </div>
  </div>

  <!-- Search -->
  <!-- <div class="mb-2">
    <input [(ngModel)]="searchTerm" placeholder="Search by employeeName, description,batch ID..." class="form-control" (keyup.enter)="onSearch(searchTerm)" />
    <button class="btn btn-sm primary ms-2" (click)="onSearch(searchTerm)">Search</button>
  </div> -->

  <div class="mb-2 d-flex align-items-center gap-2">
  <input
    [(ngModel)]="searchTerm"
    placeholder="Search by employee, description, batch ID.."
    class="form-control flex-grow-1"
    (keyup.enter)="onSearch(searchTerm)"
  />
  <button class="btn btn-sm primary" (click)="onSearch(searchTerm)">Search</button>
  <button class="btn btn-sm secondary" (click)="clearSearch()">Clear</button>
</div>

  <div *ngIf="loading" class="loading">Loading...</div>

  <div class="table-container" *ngIf="!loading && salaries.length">
    <table class="salary-table">
      <thead>
        <tr>
          <th>#</th>
          <th (click)="setSort('date')">Date</th>
          <th (click)="setSort('lastname')">Employee</th>
          <th>Description</th>
          <th (click)="setSort('amount')">Amount</th>
          <th>Batch</th>
          <!-- <th></th> -->
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of salaries; let i = index">
          <td>{{ (pageNumber-1)*pageSize + i + 1 }}</td>
          <td>{{ s.date | date: 'MMM d, y, h:mm a' }}</td>
          <td>{{ s.employeeName || 'Employee #' + s.employeeId }}</td>
          <td>{{ s.description || '-' }}</td>
          <td class="amount">â‚¹{{ s.amount }}</td>
          <td>
            <span class="badge" [class.batch]="s.batchId" [class.single]="!s.batchId">
              {{ s.batchId ? 'Batch ' + s.batchId : 'Single' }}
            </span>
          </td>
          <!-- <td>
            <button class="btn-link" (click)="onDelete(s.salaryDisbursementId)">Delete</button>
          </td> -->
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && !salaries.length" class="empty-state">
    No salary disbursements found.
  </div>

  <!-- Pagination -->
  <!-- <div class="mt-2" *ngIf="totalCount > pageSize">
    <button class="btn btn-sm secondary me-1" (click)="goToPage(pageNumber-1)">Prev</button>
    <span>Page {{ pageNumber }} of {{ totalPages }}</span>
    <button class="btn btn-sm secondary ms-1" (click)="goToPage(pageNumber+1)">Next</button>
  </div> -->

  <!-- Pagination -->
<div class="d-flex justify-content-end align-items-center mt-3 gap-2" *ngIf="totalCount > pageSize">
  <button class="btn btn-outline-secondary btn-sm" [disabled]="pageNumber === 1" (click)="goToPage(pageNumber - 1)">
    Prev
  </button>
  <span>Page {{ pageNumber }} of {{ totalPages }}</span>
  <button class="btn btn-outline-secondary btn-sm" [disabled]="pageNumber === totalPages" (click)="goToPage(pageNumber + 1)">
    Next
  </button>
</div>

</div>
